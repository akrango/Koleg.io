@model Koleg.io.Models.UploadDetailsViewModel

@{
    ViewBag.Title = "Details";
}

@section Styles {
    <style>
        /* Style the comments container with a narrower width */
        .comments-wrapper {
            max-width: 300px; /* Set the maximum width for the comment section */
            max-height: 300px; /* Set the maximum height for the scrollable area */
            overflow-y: auto; /* Enable vertical scrolling when content overflows */
            border: 2px solid #007bff; /* Set a border with a nice blue color */
            padding: 10px; /* Add padding for spacing */
            border-radius: 10px; /* Round the corners */
            box-shadow: 2px 2px 5px #888888; /* Add a subtle box shadow */
        }

        /* Style individual comments */
        .comment {
            margin-bottom: 10px; /* Add spacing between comments */
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            border-radius: 5px; /* Round the corners */
            box-shadow: 2px 2px 5px #888888;
        }

            /* Style the user's name in each comment */
            .comment strong {
                color: #007bff; /* Set the name color to match the border */
            }

            /* Style the comment text */
            .comment p {
                margin: 0; /* Remove default paragraph margin */
            }

        /* Optional: Style the Add Comment form */
        .form-group {
            margin-top: 20px;
        }

    </style>
}

<h2>Details</h2>

<div>
    <h4>Upload</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Upload.FileName)
        </dt>

        <dd>
            @Html.ActionLink(Model.Upload.FileName, "DownloadFile", new { id = Model.Upload.Id })
        </dd>
    </dl>
</div>

<div class="comments-wrapper">
    <div class="comments">
        @foreach (var comment in Model.Upload.Comments)
        {
            <p>
                <strong>@comment.User.FirstName:</strong> @comment.CommentText
            </p>
        }
    </div>
</div>


<p>

    <h2>Add Comment</h2>

    @using (Html.BeginForm("AddComment", "Uploads", FormMethod.Post, new { id = "commentForm" }))
    {
        @Html.HiddenFor(model => model.Comment.UploadId)
        @Html.HiddenFor(model => model.Comment.UserId)

        <div class="form-group">
            @Html.TextAreaFor(model => model.Comment.CommentText, new { @class = "form-control" })
        </div>

    }
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Upload.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>

@section Scripts{
    <script>
        $(document).ready(function () {
            $("#commentForm").on("keyup keypress", function (e) {
                var keyCode = e.keyCode || e.which;
                if (keyCode === 13) {
                    e.preventDefault(); // Prevent the default action (form submission)
                    // You can optionally perform additional actions or validation here if needed.
                    $(this).submit(); // Trigger the form submission
                }
            });
        });
    </script>

}


